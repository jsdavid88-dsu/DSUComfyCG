# DSUComfyCG Manager - 사용자 설명서 (v1.1)

 DSUMComfyCG Manager에 새로 통합된 "고급 모델 다운로드 기능"의 사용 설명서입니다. 이번 업데이트로 복잡한 워크플로우에 필요한 노드와 모델을 더욱 쉽고 스마트하게 다운로드할 수 있습니다.

---

## 🚀 1. 3단 레이아웃 워크플로우 화면 (새 기능!)
메인 화면의 **[🔧 워크플로우]** 탭이 3단 구조로 개편되었습니다.

1. **워크플로우 리스트 (왼쪽):** JSON 파일 목록에서 원하는 파이프라인을 선택합니다.
2. **의존성 트리 (가운데):** 해당 워크플로우를 실행하기 위해 필요한 커스텀 노드와 모델 목록이 나타납니다. `상태`와 `Match` 열을 통해 현재 설치 여부와 검색 신뢰도(Confidence)를 한눈에 볼 수 있습니다.
   - 🟢 `✓ 100%`: 정확히 일치함
   - 🟡 `~ 85%`: 유사한 파일 이름(Fuzzy 매칭) 혹은 정밀도(fp16, GGUF 등)만 다른 파일 매칭
   - ❓ `알 수 없음`: DB나 API로 찾지 못한 파일
3. **Queue & Model Details (오른쪽):** 위쪽에는 선택한 모델의 상세 정보(폴더 위치, 매치 방식, API 소스 링크)가 나타나며, 아래쪽에는 다운로드 대기열(Queue)이 위치합니다.

---

## ✨ 2. 고급 검색 (Advanced Search with Tavily)
모델의 출처를 알 수 없어(❓ 표기) 직접 다운로드할 수 없을 때 유용한 AI 기반 검색 엔진 기능입니다.

1. 가운데 의존성 트리에서 `❓ 소스 알 수 없음`으로 표시된 모델을 클릭합니다.
2. 우측 상단의 **[Model Details]** 패널에서 **`✨ Advanced Search (Tavily)`** 버튼을 클릭합니다.
3. 시스템이 AI 검색 엔진(Tavily)을 통해 HuggingFace, CivitAI 등에서 다운로드 가능한 링크를 찾아 아래 리스트에 보여줍니다.
4. 검색 결과를 **더블 클릭**하면 다운로드 URL 입력창에 자동으로 주소가 채워집니다.

---

## 🔗 3. 수동 소스 입력 및 DB 저장
사용자가 직접 다운로드 링크를 알고 있다면, 매니저가 다음부터는 이 모델을 자동으로 찾을 수 있게 학습시킬 수 있습니다.

1. 알 수 없는 모델 클릭 후 우측 **[Model Details]** 패널의 입력창에 직접 URL을 붙여넣습니다. (또는 고급 검색 결과를 더블 클릭하여 자동 완성시킵니다.)
2. **`[저장]`** 버튼을 누릅니다.
3. URL이 로컬 모델 DB(`models_db.json`)에 저장되며, 앞으로 다른 워크플로우에서 동일한 모델이 필요할 때는 자동으로 이 URL을 사용해 다운로드합니다!

---

## 📦 4. 로컬 모델 브라우저 (Local Models Tab)
현재 PC에 설치된 모든 모델을 직관적으로 탐색할 수 있습니다.

- **[📦 로컬 모델]** 탭으로 이동합니다.
- **폴더 트리:** 좌측에서 `checkpoints`, `loras`, `controlnet` 등 카테고리별로 설치된 모델을 볼 수 있습니다.
- **용량 및 관리:** 파일을 클릭해 용량을 확인하고 쓸데없는 모델은 지울 수 있습니다.
- **미사용 모델 식별 (`unused` 패턴 매칭):** 워크플로우 리스트에 있는 그 어떤 JSON에서도 단 한 번도 쓰이지 않은 모델을 색상(빨간 텍스트)과 태그로 구분해줍니다. 용량 정리에 유용합니다.

---

## ⚙️ 5. 설정 탭 (Settings Tab)
검색 엔진과 다운로더의 세부 설정을 변경합니다.

- **[⚙️ 설정]** 탭에 들어갑니다.
- **API Keys:** HuggingFace 토큰, CivitAI API Key, Tavily API Key를 입력하여 검색 품질과 속도를 대폭 비약적으로 향상시킬 수 있습니다. *(API Key 없이도 기본 검색은 모두 작동합니다)*
- **병렬 다운로드 (aria2):** 지원 환경일 경우 매우 빠른 분할 다운로드를 지원합니다.
- **캐시 초기화:** 검색 기록이나 잘못 매칭된 로컬 데이터를 지울 때 사용합니다. `사용되지 않는 모델 캐시 초기화` 버튼으로 언제든 시스템을 깔끔하게 유지하세요.
